## TomEE 8 Demo App

*configurado para deploy no https://www.heroku.com/[Heroku] com Docker.

Mais informações em /Dockerfile, /Dockerfile.dev e /src/main/webapp/WEB-INF/resources.xml
mvn clean install tomee:exec

Como o heroku cria uma porta http aleatória em cada startup é preciso [era preciso, já está feito] configurar o server.xml, na tag <Connector> para pegar variável informada no comando 'java -jar'.

As customizações dos arquivos (e das pastas, e.g. 'bin', 'conf', etc...) de configuração do TomEE podem ser substituídos colocando-os em /src/main/tomee/.
O server.xml está em /src/main/tomee/conf/server.xml. A build substituirá os arquivos padrões do TomEE pelos que estiverem nessa pasta /src/main/tomee/. 

Na tag <Connector> do server.xml pode-se ver que está <Connector port="${custom.http.port}" ...>. Essa variável é passada para o TomEE no comando 'java -jar', por exemplo: 

-> `java -DadditionalSystemProperties=-Dcustom.http.port=8080 -jar /app/luisfga-tomee-demo-exec.jar run` em desenvolvimento
ou
-> `java -DadditionalSystemProperties=-Dcustom.http.port=$PORT -jar /app/luisfga-tomee-demo-exec.jar run`, como é usado no container Docker para fazer o bind com a porta aleatória criada pelo Heroku
